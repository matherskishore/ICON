<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Dispatch Entry
    </h1>
    <ol class="breadcrumb">
      <li>
        <a routerLink='{{previousPage}}'>
          <i class="fa fa-dashboard"></i>Home</a>
      </li>
      <li class="active"> Dispatch Entry</li>
    </ol>
  </section>
  <!-- Main content -->
  <section class="content">
    <div class="row">
      <div class="col-md-12">
        <div *ngIf="msg" role="alert" class="alert alert-info alert-dismissible">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
          <span class="sr-only">Error:</span> {{msg}}
        </div>
        <br/>
        <div class="alert alert-info" role="alert" *ngIf="indLoading">
          <img src="assets/images/loading.gif" width="32" height="32" /> Loading...</div>
      </div>
    </div>
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Invoice Details</h3>
      </div>
      <div class="box-body">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label class="control-label">Invoice #</label>
              <ng-select id="ddl_invoices" [(ngModel)]="invoiceCtrl" name="invoiceCtrl" [items]="invoiceList" (selected)="onInvoiceChange($event)">
              </ng-select>
            </div>
          </div>
          <div class="col-md-4">
          </div>
          <div class="col-md-4">
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">Invoice #</label>
              <label class="form-control" required name='Invoice_Number'>{{invoiceDetail.InvoiceNumber}}
              </label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">Client</label>
              <label class="form-control" name='ClientName'>{{invoiceDetail.ClientName}}
              </label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">Invoice Date</label>
              <label class="form-control" name='InvoiceDate'>{{invoiceDetail.InvoiceDate | amDateFormat: 'DD-MM-YYYY'}}
              </label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">IRF #</label>
              <label class="form-control" name='IRFNumber'>{{invoiceDetail.IRFID}}
              </label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">IRF Type</label>
              <label class="form-control" name='IRFType'>{{invoiceDetail.IRFType}}
              </label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group ">
              <label class="control-label ">Invoice amount</label>
              <label class="form-control" name='InvoiceType'>{{invoiceDetail.InvoiceAmount}}
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Dispatch Details</h3>
      </div>
      <div class="box-body">
        <form novalidate #myReviewForm="ngForm">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label class="control-label">Delivery Type</label>
                <select [disabled]="isReadOnly" class="form-control" name='StaffingInvoiceCategory' [(ngModel)]="dispatchDetail.DeliveryType"
                  required>
                  <option *ngFor="let type of deliveryTypes" value={{type}}>
                    {{type}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label class="control-label">Dispatch date</label>
                <my-date-picker [disabled]="isReadOnly" [(ngModel)]="dispatchDate" [options]="myDatePickerOptions" required name='dispatchDate'
                  (dateChanged)="onDateChanged($event)"></my-date-picker>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label class="control-label">Consignment number</label>
                <input type="text" [disabled]="isReadOnly" class="form-control" [required]="dispatchDetail.DeliveryType=='Courier'" name="ConsignmentNumber"
                  maxlength="20" [(ngModel)]="dispatchDetail.ConsignmentNumber" />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="pull-right">
                <a class="btn btn-default" routerLink='/home/dispatch-history'>Cancel</a>&nbsp;&nbsp;
                <button type="button" (click)="onSave();" class="btn btn-primary" [disabled]="!myReviewForm.form.valid">{{btnText}}</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>
</div>
